# üì¶ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
cd ~/github/selkies/addons/gst-web-react
npm install
```

### 2. –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

```bash
npm run build
```

–†–µ–∑—É–ª—å—Ç–∞—Ç –±—É–¥–µ—Ç –≤ –ø–∞–ø–∫–µ `dist/`:
```
dist/
‚îú‚îÄ‚îÄ index.html          # –ì–ª–∞–≤–Ω–∞—è HTML —Å—Ç—Ä–∞–Ω–∏—Ü–∞
‚îú‚îÄ‚îÄ assets/
‚îÇ   ‚îú‚îÄ‚îÄ index-*.css    # –°—Ç–∏–ª–∏
‚îÇ   ‚îî‚îÄ‚îÄ index-*.js     # –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π JavaScript
```

### 3. –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

#### –í–∞—Ä–∏–∞–Ω—Ç –ê: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ preview —Å–µ—Ä–≤–µ—Ä–∞ (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)

```bash
npm run preview
```

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ `http://localhost:4173`

–î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∏–∑–≤–Ω–µ:

```bash
npm run preview -- --host 0.0.0.0 --port 8080
```

#### –í–∞—Ä–∏–∞–Ω—Ç –ë: Nginx (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è production)

1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `dist/` –≤ –≤–µ–±-–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é:

```bash
sudo cp -r dist/* /var/www/gst-web-react/
```

2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Nginx (`/etc/nginx/sites-available/gst-web-react`):

```nginx
server {
    listen 80;
    server_name your-domain.com;

    root /var/www/gst-web-react;
    index index.html;

    location / {
        try_files $uri $uri/ /index.html;
    }

    # –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
    location /assets/ {
        expires 1y;
        add_header Cache-Control "public, immutable";
    }
}
```

3. –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:

```bash
sudo ln -s /etc/nginx/sites-available/gst-web-react /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl reload nginx
```

#### –í–∞—Ä–∏–∞–Ω—Ç –í: Apache

1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª—ã:

```bash
sudo cp -r dist/* /var/www/html/gst-web-react/
```

2. –°–æ–∑–¥–∞–π—Ç–µ `.htaccess` –≤ `/var/www/html/gst-web-react/`:

```apache
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /gst-web-react/
  RewriteRule ^index\.html$ - [L]
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule . /gst-web-react/index.html [L]
</IfModule>
```

3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Apache:

```bash
sudo systemctl reload apache2
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

### –ß–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã URL

–ü—Ä–æ—Å—Ç–æ –æ—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å GET –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:

```
http://your-server.com/?
  server=111.111.111.111&
  port=8080&
  app=desktop&
  debug=true&
  encoder=h264
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ | –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|----------|----------|----------------------|
| `server` | IP –∏–ª–∏ hostname WebRTC —Å–µ—Ä–≤–µ—Ä–∞ | `window.location.hostname` |
| `port` | –ü–æ—Ä—Ç —Å–∏–≥–Ω–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ | `443` |
| `app` | –ò–º—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è | `selkies` |
| `debug` | –†–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏ | `false` |
| `encoder` | –ö–æ–¥–µ–∫ (h264/h265/vp8/vp9/av1) | –Ω–µ –∑–∞–¥–∞–Ω–æ |
| `audio` | –í–∫–ª—é—á–∏—Ç—å –∞—É–¥–∏–æ | `true` |
| `resize` | –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞ | `true` |
| `scaleLocal` | –õ–æ–∫–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ | `true` |

### –ß–µ—Ä–µ–∑ React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç (–µ—Å–ª–∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç–µ)

```tsx
import { App } from './App';

const config = {
  server: '111.111.111.111',
  port: 8080,
  appName: 'desktop',
  debug: true,
  encoder: 'h264'
};

<App config={config} />
```

## üîß –†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

–î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å hot-reload:

```bash
npm run dev
```

–û—Ç–∫—Ä–æ–π—Ç–µ `http://localhost:5173` –≤ –±—Ä–∞—É–∑–µ—Ä–µ.

–î–ª—è –¥–æ—Å—Ç—É–ø–∞ —Å –¥—Ä—É–≥–∏—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏:

```bash
npm run dev -- --host
```

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –î–ª—è production –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–∞—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è HTTPS (–¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–∞–º–µ—Ä–µ/–º–∏–∫—Ä–æ—Ñ–æ–Ω—É, clipboard –∏ –¥—Ä—É–≥–∏–º API)
- **WebRTC**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ WebRTC —Å–µ—Ä–≤–µ—Ä –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ —É–∫–∞–∑–∞–Ω–Ω–æ–º—É –∞–¥—Ä–µ—Å—É
- **TURN/STUN**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ TURN —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —á–µ—Ä–µ–∑ NAT
- **Firewall**: –û—Ç–∫—Ä–æ–π—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–æ—Ä—Ç—ã (–æ–±—ã—á–Ω–æ 443 –¥–ª—è signalling, UDP –ø–æ—Ä—Ç—ã –¥–ª—è WebRTC)

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–±–æ—Ä–∫–∏

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Ñ–∞–π–ª—ã —Å–æ–∑–¥–∞–ª–∏—Å—å
ls -la dist/

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑–º–µ—Ä –±–∞–Ω–¥–ª–∞
du -sh dist/assets/*
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

–û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12) –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

1. WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫ —Å–∏–≥–Ω–∞–ª—å–Ω–æ–º—É —Å–µ—Ä–≤–µ—Ä—É
2. ICE –∫–∞–Ω–¥–∏–¥–∞—Ç—ã
3. –°–æ—Å—Ç–æ—è–Ω–∏–µ peer connection
4. –û—à–∏–±–∫–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏

### –û–±—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

**–ü—Ä–æ–±–ª–µ–º–∞**: –ß–µ—Ä–Ω—ã–π —ç–∫—Ä–∞–Ω, –Ω–µ—Ç –≤–∏–¥–µ–æ

**–†–µ—à–µ–Ω–∏–µ**: 
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ WebRTC —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ STUN/TURN
- –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—à–∏–±–∫–∏ WebRTC

**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞—É–¥–∏–æ

**–†–µ—à–µ–Ω–∏–µ**:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä `audio=true` –≤ URL
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –∞—É–¥–∏–æ –Ω–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –±—Ä–∞—É–∑–µ—Ä—ã —Ç—Ä–µ–±—É—é—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –∞—É–¥–∏–æ

**–ü—Ä–æ–±–ª–µ–º–∞**: –í—ã—Å–æ–∫–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞

**–†–µ—à–µ–Ω–∏–µ**:
- –í–∫–ª—é—á–∏—Ç–µ `debug=true` –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ—Ç–µ–≤–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–π –∫–æ–¥–µ–∫ (encoder=h264/h265/vp9)

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–ü—Ä–∏ –≤–∫–ª—é—á–µ–Ω–Ω–æ–º `debug=true` –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è:

- –ë–∏—Ç—Ä–µ–π—Ç –≤–∏–¥–µ–æ/–∞—É–¥–∏–æ
- FPS (–∫–∞–¥—Ä—ã –≤ —Å–µ–∫—É–Ω–¥—É)
- –ó–∞–¥–µ—Ä–∂–∫–∞ (latency)
- –ó–∞–≥—Ä—É–∑–∫–∞ CPU/GPU
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
- –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –≤–∏–¥–µ–æ

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ

–î–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```bash
cd ~/github/selkies/addons/gst-web-react
git pull
npm install
npm run build
sudo cp -r dist/* /var/www/gst-web-react/
```

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é Selkies GStreamer –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç—É –∂–µ –ª–∏—Ü–µ–Ω–∑–∏—é.

